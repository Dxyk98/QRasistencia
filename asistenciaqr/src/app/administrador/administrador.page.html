<ion-content class="ion-padding">
  <form [formGroup]="personaForm" (ngSubmit)="guardarPersona()">
    <ion-item class="p-2">
      <ion-input
        label="Nombre"
        label-placement="floating"
        fill="outline"
        placeholder=" Ingrese Nombre"
        formControlName="nombre"
        required
      ></ion-input>
    </ion-item>
    <ion-item
      *ngIf="personaForm.get('nombre')?.invalid && (personaForm.get('nombre')?.dirty || personaForm.get('nombre')?.touched)"
      class="py-2"
    >
      <ion-text color="danger"
        >El nombre es requerido y debe tener al menos 2 caracteres.</ion-text
      >
    </ion-item>

    <ion-item class="p-2">
      <ion-input
        label="Apellido"
        label-placement="floating"
        fill="outline"
        placeholder=" Ingrese apellido"
        formControlName="apellido"
        required
      ></ion-input>
    </ion-item>
    <ion-item
      *ngIf="personaForm.get('apellido')?.invalid && (personaForm.get('apellido')?.dirty || personaForm.get('apellido')?.touched)"
      class="py-2"
    >
      <ion-text color="danger"
        >El apellido es requerido y debe tener al menos 2 caracteres.</ion-text
      >
    </ion-item>

    <ion-item class="p-2">
      <ion-select
        label="Carrera"
        label-placement="floating"
        fill="outline"
        formControlName="carrera"
        required
      >
        <ion-select-option *ngFor="let carrera of carreras" [value]="carrera">
          {{ carrera }}
        </ion-select-option>
      </ion-select>
    </ion-item>
    <ion-item
      *ngIf="personaForm.get('carrera')?.invalid && (personaForm.get('carrera')?.dirty || personaForm.get('carrera')?.touched)"
      class="py-2"
    >
      <ion-text color="danger">La carrera es requerida.</ion-text>
    </ion-item>

    <ion-item class="p-2">
      <ion-input
        label="Email"
        label-placement="floating"
        fill="outline"
        placeholder=" Ingrese email"
        formControlName="email"
        required
      ></ion-input>
    </ion-item>
    <ion-item
      *ngIf="personaForm.get('email')?.invalid && (personaForm.get('email')?.dirty || personaForm.get('email')?.touched)"
      class="py-2"
    >
      <ion-text color="danger">Por favor, ingrese un email v치lido.</ion-text>
    </ion-item>

    <ion-item class="p-2">
      <ion-input
        label="Contrase침a"
        label-placement="floating"
        type="password"
        fill="outline"
        placeholder=" Ingrese contrase침a"
        formControlName="contrasena"
        required
      ></ion-input>
    </ion-item>
    <ion-item
      *ngIf="personaForm.get('contrasena')?.invalid && (personaForm.get('contrasena')?.dirty || personaForm.get('contrasena')?.touched)"
      class="py-2"
    >
      <ion-text color="danger"
        >La contrase침a debe tener al menos 8 caracteres.</ion-text
      >
    </ion-item>

    <ion-button expand="block" type="submit" [disabled]="!personaForm.valid"
      >Guardar Persona</ion-button
    >
  </form>

  <ion-list>
    <ion-list-header>
      <ion-label>Lista de Personas</ion-label>
    </ion-list-header>
    <ion-item *ngFor="let persona of personas">
      <ion-label>
        <h2>{{ persona.nombre }} {{ persona.apellido }}</h2>
        <p>{{ persona.email }}</p>
      </ion-label>
      <ion-button slot="end" (click)="obtenerPersona(persona.email)"
        >Ver</ion-button
      >
      <ion-button
        slot="end"
        color="danger"
        (click)="eliminarPersona(persona.email)"
        >Eliminar</ion-button
      >
    </ion-item>
  </ion-list>
</ion-content>
